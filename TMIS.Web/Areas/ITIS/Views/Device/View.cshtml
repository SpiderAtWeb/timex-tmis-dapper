@using TMIS.Models.ITIS.VM
@model ViewDeviceVM

@section VendorStyles {
	<link rel="stylesheet" href="~/vendor/libs/flatpickr/flatpickr.css" />
	<link rel="stylesheet" href="~/vendor/libs/select2/select2.css" />
	<link href="~/css/input-text-upper.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/vendor/libs/datatables-bs5/datatables.bootstrap5.css">
    <link href="~/css/site.css" rel="stylesheet" />
}

@section VendorScripts {
	<script src="~/vendor/libs/flatpickr/flatpickr.js"></script>
	<script src="~/vendor/libs/select2/select2.js"></script>
}

@section PageScripts {
	<script src="~/js/form-layouts.js"></script>
	<script src="~/custom/input-text-upper.js"></script>
    <script src="~/custom/tables-datatables-basic.js"></script>
}

@section PageStyles {
    <style>
        .table td {
            max-width: 100px; /* Set a suitable width for your columns */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dt-tbl {
            font-size: 12px; /* Adjust this value to your preferred size */
        }
    </style>
}

<!-- Multi Column with Form Separator -->
<div class="card mb-6">
	<h5 class="card-header page-header">
        Details
	</h5>
	<form class="card-body" id="myForm" enctype="multipart/form-data">
		<input asp-for="@Model.DeviceDetail!.DeviceID" type="hidden" />
		<input asp-for="@Model.DeviceUserDetail!.AssignmentID" type="hidden" />
		<div class="row g-1">

			<div class="card" id="deviceDetailsField">
				<div class="card-header fw-bold">
                    Asset Details
				</div>
				<div class="card-body">
					<div class="row g-2" id="deviceDetailContainer">
						<div class="col-md-3">
							<div class="form-floating form-floating-outline">
                                <input type="text" class="form-control input-disabled-black" value="@Model.DeviceDetail!.DeviceType" disabled />
								<label>Asset Type</label>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-floating form-floating-outline">
                                <input type="text" class="form-control input-disabled-black" value="@Model.DeviceDetail!.DeviceName" disabled />
								<label>Asset Name</label>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-floating form-floating-outline">
                                <input type="text" class="form-control input-disabled-black" value="@Model.DeviceDetail!.SerialNumber" disabled />
								<label>Serial Number</label>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-floating form-floating-outline">
                                <input type="text" class="form-control input-disabled-black" value="@Model.DeviceDetail!.FixedAssetCode" disabled />
								<label>FA Code</label>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-floating form-floating-outline">
                                <input type="text" class="form-control input-disabled-black" value="@Model.DeviceDetail!.PurchasedDate?.ToString("MM-dd-yyyy")" disabled />
								<label>Purchased Date</label>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-floating form-floating-outline">
                                <input type="text" class="form-control input-disabled-black" value="@Model.DeviceDetail!.Depreciation" disabled />
								<label>Depreciation</label>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-floating form-floating-outline">
                                <input type="text" class="form-control input-disabled-black" value="@Model.DeviceDetail!.Vendor" disabled />
								<label>Vendor</label>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-floating form-floating-outline">
                                <input type="text" class="form-control input-disabled-black" value="@Model.DeviceDetail!.Location" disabled />
								<label>Location</label>
							</div>
						</div>
						<div class="col-md-2">
							<div class="list-group">
								<label class="list-group-item w-100">
									<span class="form-check mb-0">
										<input type="checkbox"
											   class="form-check-input me-4"
											   checked="@(Model.DeviceDetail!.IsRented == true)"
											   disabled="@(Model.DeviceDetail.IsRented == true ? "disabled" : "disabled")" />
                                        <label class="form-check-label" for="isRentedCheck">Is Rented</label>
									</span>
								</label>
							</div>
						</div>
						<div class="col-md-2">
							<div class="list-group">
								<label class="list-group-item w-100">
									<span class="form-check mb-0">
										<input type="checkbox"
											   class="form-check-input me-4"
											   checked="@(Model.DeviceDetail!.IsBrandNew == true)"
											   disabled="@(Model.DeviceDetail.IsBrandNew == true ? "disabled" : "disabled")" />
                                        <label class="form-check-label" for="isRentedCheck">Is Brand New</label>
									</span>
								</label>
							</div>
						</div>						
						<div class="col-md-3">
							<div class="form-floating form-floating-outline">
                                <input type="text" class="form-control input-disabled-black" value="@Model.DeviceDetail!.Department" disabled />
								<label>Cost Center</label>
							</div>
						</div>
						<div class="col-md-5">
							<div class="form-floating form-floating-outline">
                                <input type="text" class="form-control input-disabled-black" value="@Model.DeviceDetail!.Remark" disabled />
								<label>Description</label>
							</div>
						</div>
						@if (Model.DeviceDetail!.AttributeValues != null && Model.DeviceDetail!.AttributeValues.Any())
						{
							foreach (var item in Model.DeviceDetail!.AttributeValues)
							{
								<div class="col-md-3">
									<div class="form-floating form-floating-outline">
                                        <input type="text" class="form-control input-disabled-black" value="@item.ValueText" disabled />
										<label>@item.Name</label>
									</div>
								</div>
							}
						}
						<div class="row">
							<div class="col-md-3">
								<div class="image-preview">
									@if (Model!.DeviceDetail!.Image1Data != null && Model!.DeviceDetail!.Image1Data.Length > 0)
									{
										var base64Image = Convert.ToBase64String(Model!.DeviceDetail!.Image1Data);
										<img id="Img1" src="data:image/jpeg;base64,@base64Image" alt="Image Preview" style="max-width: 100%; height: auto;" />
									}
									else
									{
										<img src="~/img/my-images/no-image.jpg" alt="No Image Available" style="max-width: 100px; height: auto;" />
									}
								</div>
							</div>
							<div class="col-md-3">
								<div class="image-preview">
									@if (Model!.DeviceDetail!.Image2Data != null && Model!.DeviceDetail!.Image2Data.Length > 0)
									{
										var base64Image = Convert.ToBase64String(Model!.DeviceDetail!.Image2Data);
										<img id="Img1" src="data:image/jpeg;base64,@base64Image" alt="Image Preview" style="max-width: 100%; height: auto;" />
									}
									else
									{
										<img src="~/img/my-images/no-image.jpg" alt="No Image Available" style="max-width: 100px; height: auto;" />
									}
								</div>
							</div>
							<div class="col-md-3">
								<div class="image-preview">
									@if (Model!.DeviceDetail!.Image3Data != null && Model!.DeviceDetail!.Image3Data.Length > 0)
									{
										var base64Image = Convert.ToBase64String(Model!.DeviceDetail!.Image3Data);
										<img id="Img1" src="data:image/jpeg;base64,@base64Image" alt="Image Preview" style="max-width: 100%; height: auto;" />
									}
									else
									{
										<img src="~/img/my-images/no-image.jpg" alt="No Image Available" style="max-width: 100px; height: auto;" />
									}
								</div>
							</div>
							<div class="col-md-3">
								<div class="image-preview">
									@if (Model!.DeviceDetail!.Image4Data != null && Model!.DeviceDetail!.Image4Data.Length > 0)
									{
										var base64Image = Convert.ToBase64String(Model!.DeviceDetail!.Image4Data);
										<img id="Img1" src="data:image/jpeg;base64,@base64Image" alt="Image Preview" style="max-width: 100%; height: auto;" />
									}
									else
									{
										<img src="~/img/my-images/no-image.jpg" alt="No Image Available" style="max-width: 100px; height: auto;" />
									}
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			@if (Model.DeviceUserDetail != null)
			{
				<div class="card" id="userDetailsField">
					<div class="card-header fw-bold">
						User Details
					</div>
					<div class="card-body">
						<div class="row g-2" id="userDetailContainer">
							<div class="col-md-3">
								<div class="form-floating form-floating-outline">
                                    <input type="text" class="form-control input-disabled-black" value="@Model.DeviceUserDetail!.EmpName" disabled />
									<label>Employee</label>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-floating form-floating-outline">
                                    <input type="text" class="form-control input-disabled-black" value="@Model.DeviceUserDetail!.Designation" disabled />
									<label>Designation</label>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-floating form-floating-outline">
                                    <input type="text" class="form-control input-disabled-black" value="@Model.DeviceUserDetail!.AssignedDate?.ToString("MM-dd-yyyy")" disabled />
									<label>Assigned Date</label>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-floating form-floating-outline">
                                    <input type="text" class="form-control input-disabled-black" value="@Model.DeviceUserDetail!.AssignRemarks" disabled />
									<label>Assigner Comment</label>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-floating form-floating-outline">
                                    <input type="text" class="form-control input-disabled-black" value="@Model.DeviceUserDetail!.ApproverResponseDate?.ToString("MM-dd-yyyy")" disabled />
									<label>Approved Date</label>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-floating form-floating-outline">
                                    <input type="text" class="form-control input-disabled-black" value="@Model.DeviceUserDetail!.ApproverRemark" disabled />
									<label>Approver Comment</label>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-floating form-floating-outline">
                                    <input type="text" class="form-control input-disabled-black" value="@Model.DeviceUserDetail!.AssignLocation" disabled />
									<label>Location</label>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-floating form-floating-outline">
                                    <input type="text" class="form-control input-disabled-black" value="@Model.DeviceUserDetail!.AssignDepartment" disabled />
									<label>Department</label>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-floating form-floating-outline">
                                    <input type="text" class="form-control input-disabled-black" value="@Model.DeviceUserDetail!.AssignStatus" disabled />
									<label>Assign State</label>
								</div>
							</div>
						</div>
					</div>
                </div>

            }


            <div class="card" id="userDetailsField">
				<div class="card-header fw-bold">
					Previous Users
				</div>
				<div class="card-body">
                    <div class="card-datatable text-nowrap">
                        <table class="datatables-ajax table table-bordered dt-tbl">
                            <thead>
                                <tr class="table-info">
                                    <th>Employee Name</th>                                                               
                                    <th>Designation</th>
                                    <th>Assigned Date</th>
                                    <th>Location</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.PreviousUsers!)
                                {
                                    <tr>
                                        <td>@item.EmpName</td>
                                        <td>@item.Designation</td>                                
                                        <td>@item.AssignedDate?.ToString("MM-dd-yyyy")</td>
                                        <td>@item.AssignLocation</td>                                       
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
			<div class="col-md-3">
			</div>

			<div id="activityContainer">
			</div>

			<div class="pt-1">
				<a asp-controller="Device" asp-action="Index" class="btn btn-outline-secondary">Back to List</a>
			</div>

		</div>
	</form>

</div>
